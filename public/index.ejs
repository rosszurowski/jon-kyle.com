<%
  var entryCount = 0
%>

<main>
  <div class="bg-black x xac xjc" style="min-height: 50vh">
    <div style="width: 100%; max-width: 25vh">
      <div class="bg-white" style="position: relative; padding-bottom: 100%; height: 0;">
        <img src="/assets/me.png" class="psa t0 l0" style="height: 100%; width: 100%" />
      </div>
    </div>
  </div>

  <div class="p2 h2 links-sans serif">
    <%- partial('_about.md') %>
  </div>

  <div class="p3-5 pb0" sm="p0" md="p2 pb0">
    <div data-rows class="bg-black py2 color-dusty-rose">
      <% public._data.entries.forEach(function (entry) { %>
        <%
          entryCount += 1
        %>
        <div class="x p2 psr">
          <div data-row="<%- entryCount %>">
            <div class="dib tal">
              <% entry.projects.forEach(function (child) { %>
                <div class="h2 serif">
                  <a href="<%- child.url %>"><%- child.title %></a> /&nbsp;<%- child.date %>
                </div>
              <% }) %>
              <% if (entry.title) { %>
                <div class="ml3 sans" sm="h5"><%- entry.title %></div>
              <% } %>
              <% if (entry.excerpt) { %>
                <div class="ml3 sans" sm="h5"><%- entry.excerpt %></div>
              <% } %>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <div class="p3-5 pt0 list-archive" sm="p0" md="p2 pt0">
    <% public.entries._data.map(function (path) { %>
      <%
        const entry = public.entries[path]
        const data = entry._data
      %>
      <a href="/entries/<%- path %>" class="x sans" sm="px2">
        <div class="c8 py1">
          <strong><%- data.title %></strong>
        </div>
        <div class="c2 p1">
          <%- data.category[0].toUpperCase() + data.category.slice(1) %>
        </div>
        <div class="c2 py1 tar">
          <%- data.date %>
        </div>
      </a>
    <% }) %>
  </div>

  <div class="x xw h6 p1" sm="h5">
    <% for(var e in public.log._data.entries) { %>
      <%
        var entry = public.log._data.entries[e]
        var date = entry.date.split('/').map(function(d) {
          return '<span class="sans-bold">' + d + '</span>'
        }).toString().replace(/,/g, '/')
      %>
      <div class="p1 c6" sm="c12">
        <div class="ml3">
          <%- date %>â€”
        </div>
        <div class="sans links-underline">
          <%- partial('log/' + e) %>
        </div>
      </div>
    <% } %>
  </div>

  <div class="mt4">
    <%- partial('_mailinglist') %>
  </div>
</main>
